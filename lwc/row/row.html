<template>
    <tr aria-selected="false" class="slds-hint-parent" style="width: 100%; display: contents;">
        <th class="slds-cell-edit" role="gridcell">
            <span class="slds-grid slds-grid_align-spread">
                <span class="slds-truncate" title={row.Index}>{row.Index}</span>
            </span>
        </th>
        <th data-th-name-id={row.Id} class="slds-cell-edit" scope="row" tabindex="0">
            <span class="slds-grid slds-grid_align-spread">
                <span class="slds-truncate" title={row.Rating}>{draftNameValue}</span>
                <button if:true={row.controlEditName} class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="-1"
                    title="Edit" onclick={handleEditName}>
                    <lightning-icon size="xx-small" class="slds-button__icon slds-button__icon_hint slds-button__icon_edit"
                        icon-name="utility:edit" alternative-text="Edit" title="Edit">
                    </lightning-icon>
                </button>
            </span>
            <section if:true={showModalEditName} aria-describedby="dialog-body-id-{row.Index}" class="slds-popover slds-popover slds-popover_edit" role="dialog"
                style="position:absolute;top:0;left:0.0625rem">
                <div class="slds-popover__body">
                    <div class="slds-media">
                        <div class="slds-media__body">
                            <div class="slds-form-element slds-grid slds-wrap">
                                <label class="slds-form-element__label slds-form-element__label_edit slds-no-flex">
                                    <span class="slds-assistive-text">{draftNameValue}</span>
                                </label>
                                <div class="slds-form-element__control slds-grow">
                                    <input autofocus type="text" class="slds-input" data-id={row.Id} value={draftNameValue} onblur={handleNameOnBlur} onkeyup={handleNameOnKeyUp}/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </th>
        <th data-th-rating-id={row.Id} class="slds-cell-edit" role="gridcell">
            <span class="slds-grid slds-grid_align-spread">
                <span class="slds-truncate" title={row.Rating}>{draftRatingValue}</span>
                <button if:true={row.controlEditRating} class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="-1"
                    title="Edit" onclick={handleEditRating}>
                    <lightning-icon size="xx-small" class="slds-button__icon slds-button__icon_hint slds-button__icon_edit"
                        icon-name="utility:edit" alternative-text="Edit" title="Edit">
                    </lightning-icon>
                </button>
            </span>
            <section if:true={showModalEditRating} aria-describedby="dialog-body-id-{row.Index}"
                class="slds-popover slds-popover slds-popover_edit" role="dialog" style="position:absolute;top:0;left:0.0625rem">
                <div class="slds-popover__body">
                    <div class="slds-media">
                        <div class="slds-media__body">
                            <div class="slds-form-element slds-grid slds-wrap">
                                <label class="slds-form-element__label slds-form-element__label_edit slds-no-flex">
                                    <span class="slds-assistive-text">{draftRatingValue}</span>
                                </label>
                                <lightning-combobox data-id={row.Id} name="picklist" label={label}
                                    value={draftRatingValue} placeholder={placeholder} options={ratingOptions}
                                    dropdown-alignment="auto" onblur={handleRatingOnBlur} onchange={handleRatingOnchange}> 
                                </lightning-combobox>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </th>
        <th data-th-rating-id={row.Id} class="slds-cell-edit" role="gridcell">
            <span class="slds-grid slds-grid_align-spread" style="justify-content: center; display: flex;">
                <button
                    class="slds-button slds-button_icon" tabindex="-1" title="Delete"
                    onclick={handleDelete}>
                    <lightning-icon size="xx-small" class="slds-button__icon"
                        icon-name="utility:delete" alternative-text="Delete" title="Delete">
                    </lightning-icon>
                </button>
            </span>
        </th>
    </tr>
</template>